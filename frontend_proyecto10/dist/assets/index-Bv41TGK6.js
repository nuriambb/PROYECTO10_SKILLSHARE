(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}})();const Y=()=>{const n=document.createElement("div");return n.className="spinner",n.innerHTML='<div class="loading"></div>',n};document.body.appendChild(Y());async function E(n,t={}){const a=window.location.hostname==="localhost"?"http://localhost:3000/api/v1":"https://proyecto10-skillshare.onrender.com/api/v1",o=localStorage.getItem("token"),e={};o&&(e.Authorization=`Bearer ${o}`),t.body instanceof FormData?delete e["Content-Type"]:e["Content-Type"]="application/json";const s={method:t.method||"GET",headers:{...e,...t.headers},body:t.body};K();try{console.log("URL completa:",`${a}${n}`),console.log("Configuración de la solicitud:",s);const r=await fetch(`${a}${n}`,s);console.log("Respuesta:",r);let i;try{i=await r.json()}catch(l){console.error("Detalles del error:",l.message),i=null}if(!r.ok){const l=(i==null?void 0:i.message)||"Error en la solicitud";return P(),{error:!0,message:l}}return P(),i||r}catch(r){throw console.error("Error en fetch:",r.message),r}}function K(){const n=document.querySelector(".spinner");console.log("Mostrando spinner:",n),n&&(n.style.display="flex")}function P(){const n=document.querySelector(".spinner");n&&(n.style.display="none")}const H=(n,t,a={},o)=>{const e=document.createElement("form"),s=document.createElement("h2");s.textContent=n,e.appendChild(s);const r=document.createElement("div");if(r.className="input-container",a.nombre){const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("placeholder","nombre"),c.setAttribute("name","name"),c.setAttribute("autocomplete","name"),r.appendChild(c)}const i=document.createElement("input");i.setAttribute("type","email"),i.setAttribute("placeholder","email"),i.setAttribute("name","email"),i.setAttribute("autocomplete","email"),r.appendChild(i);const l=document.createElement("input");l.setAttribute("type","password"),l.setAttribute("placeholder","contraseña"),l.setAttribute("name","password"),l.setAttribute("autocomplete","current-password"),r.appendChild(l),e.appendChild(r);const d=document.createElement("button");return d.setAttribute("type","submit"),o==="registro"?d.textContent="Regístrate":d.textContent="Iniciar sesión",e.appendChild(d),t.appendChild(e),e},Q=()=>{const n=document.createElement("div");n.className="crear-taller-container";const t=document.createElement("form");t.innerHTML=`
    <div class="input-container">
      <input type="text" id="titulo" placeholder="Título del taller" required />
    </div>
    <div class="input-container">
      <input type="file" id="img" accept="image/*" />
    </div>
    <div class="input-container">
      <textarea id="descripcion" placeholder="Descripción" required></textarea>
    </div>
    <div class="input-container">
      <input type="text" id="modalidad" placeholder="Modalidad (presencial/online)" required />
    </div>
    <div class="input-container">
      <input type="number" id="plazas" placeholder="Número de plazas" required />
    </div>
    <div class="input-container">
      <input type="text" id="duracion" placeholder="Duración (ej: 2h)" required />
    </div>
    <div class="input-container">
      <input type="number" id="price" placeholder="Precio (€)" required />
    </div>
    <button type="submit">Crear Taller</button>
    <div class="error-msg"></div>
  `;const a=document.createElement("button");a.className="close-button",a.innerHTML="&times;",a.title="Cerrar formulario";const o=localStorage.getItem("token");if(!o){console.error("Token no encontrado. Asegúrate de que el usuario esté autenticado.");return}return a.addEventListener("click",e=>{e.preventDefault(),n.remove()}),t.addEventListener("submit",async e=>{e.preventDefault(),e.preventDefault();const s=document.getElementById("titulo").value,r=document.getElementById("descripcion").value,i=document.getElementById("modalidad").value,l=document.getElementById("plazas").value,d=document.getElementById("duracion").value,c=document.getElementById("price").value,m=document.getElementById("img").files[0],u=new FormData;u.append("titulo",s),u.append("descripcion",r),u.append("modalidad",i),u.append("plazas",l),u.append("duracion",d),u.append("price",c),m&&u.append("img",m);try{await E("/talleres/",{method:"POST",body:u,headers:{Authorization:`Bearer ${o}`}})?(alert("¡Taller creado con éxito!"),t.reset()):console.error("El backend no devolvió datos.")}catch(p){console.error("Error al enviar el formulario:",p.message)}}),t.appendChild(a),n.appendChild(t),n};function L(n,t){const a=document.createElement("div");a.className="div-buttons";const o=document.createElement("button");o.className="button1",o.textContent=n,o.setAttribute("data-role","button1");const e=document.createElement("button");return e.className="button2",e.textContent=t,e.setAttribute("data-role","button2"),a.append(o,e),{divButtons:a,button1:o,button2:e}}const B=async(n,t,a,o=!1)=>{for(const e of n){const s=t==="taller"?"talleres":"eventos",r=document.createElement("div");r.className="div-taller";const i=document.createElement("div");i.className="div-info1";const l=document.createElement("div");l.className="div-img";const d=document.createElement("img");d.src=e.img,l.append(d);const c=document.createElement("div");c.className="div-texto1";const m=document.createElement("h3");m.textContent=e.titulo;const u=document.createElement("p");u.className="p-reducido",u.textContent=e.descripcion.slice(0,250)+"...";let p,h,g;if(!o)({divButtons:p,button1:h,button2:g}=L("< Saber Más","Apuntarme >")),h.className="button1a",h.dataset.id=e._id,g.className="button2",g.dataset.id=e._id,c.append(m,u),i.append(c,p);else{p=document.createElement("div"),p.className="div-buttons";const b=document.createElement("button");b.textContent="Eliminar Taller",b.className="button-eliminar",b.addEventListener("click",async()=>{const N=localStorage.getItem("token");if(!N){alert("No estás autorizado");return}if(window.confirm("¿Estás seguro que quieres eliminar el taller?"))try{const y=await E(`/talleres/${e._id}`,{method:"DELETE",headers:{Authorization:`Bearer ${N}`}});y&&y.message==="Elemento eliminado"?(alert("Taller eliminado con éxito"),r.remove()):alert(y.error||"Error al eliminar el taller")}catch(y){console.error("Error al intentar eliminar:",y.message)}else console.log("Eliminación del taller cancelada.")}),p.append(b),c.append(m,u),i.append(c,p)}r.append(l,i);const f=document.createElement("div");f.className="div-info-completa",f.style.display="none";const S=document.createElement("p");S.textContent=e.descripcion;let x;t==="taller"?(x=document.createElement("h5"),x.textContent=`Impartido por ${e.user.name}`):t==="evento"&&(x=document.createElement("h5"),x.textContent=`Fecha: ${e.fecha}`);const I=document.createElement("h4");I.textContent=`Modalidad: ${e.modalidad}`;const v=document.createElement("h4");v.textContent=`Plazas: ${e.plazas}`;const D=document.createElement("h4");D.textContent=`Duración: ${e.duracion}`;const z=document.createElement("h4");z.textContent=`Precio: ${e.price}€`;let{divButtons:j,button1:U,button2:M}=L("< Mostrar menos","Apuntarme >");M.className="button2",M.dataset.id=e._id;const T=document.createElement("div");T.className="div-caract",T.append(I,v,D,z),f.append(S,x,T,j),c.append(f);const k=h;k==null||k.addEventListener("click",()=>{window.history.pushState({},"Talleres",`#talleres?id=${e._id}`),u.style.display="none",p.style.display="none",f.style.display="flex",f.classList.add("mostrar"),r.classList.add("expanded"),l.classList.add("expanded")}),U.addEventListener("click",()=>{u.style.display="flex",p.style.display="flex",f.style.display="none",f.classList.remove("mostrar"),r.classList.remove("expanded"),l.classList.remove("expanded")});const J=r.querySelectorAll(".button2");let w=await V(t);J.forEach(b=>{const N=e._id;console.log(N),w.includes(N)&&(b.textContent="¡Ya estás apuntado!",b.disabled=!0),b.addEventListener("click",async()=>{if(!localStorage.getItem("token")){alert("No estás autorizado. Por favor, inicia sesión para continuar.");return}try{const y=await E(`/${s}/apuntarse/`,{method:"POST",body:JSON.stringify({id:N})});y&&y.message==="Reservado con éxito"?(b.textContent="¡Ya estás apuntado!",b.disabled=!0,console.log("Estado antes de añadir:",{itemId:N,reservedItems:w}),w.includes(N)||(w.push(N),console.log("IDs reservados después:",w))):alert(y.error||`Error al intentar apuntarse al ${t}`)}catch(y){console.error("Error al intentar reservar:",y.message),alert("Error de conexión. Por favor, intenta de nuevo más tarde.")}})}),a&&a.append(r)}},V=async n=>{try{const t=n==="taller"?"talleresReservados":"eventosReservados",o=((await E("/users/perfil",{method:"GET"}))[t]||[]).map(e=>e._id);return console.log(`IDs reservados (${t}):`,o),o}catch(t){return console.error("Error al obtener los elementos reservados:",t),[]}},R=()=>{const t=new URLSearchParams(window.location.hash.split("?")[1]).get("id");console.log(t),t&&setTimeout(()=>{const a=document.querySelector(`.button1a[data-id="${t}"]`);console.log(a),a?(a.click(),setTimeout(()=>{const o=document.querySelector(".div-taller.expanded");o&&o.scrollIntoView({behavior:"smooth",block:"center"})},100)):console.log("No se encontró el botón con el ID",t)},100)},F=async()=>{const n=document.querySelector("main");n.innerHTML="";const t=document.createElement("section");t.className="section-talleres";const a=document.createElement("div");a.className="div-fondo";const o=document.createElement("img");o.src="./assets/waveamarilla.svg",o.className="curva",a.append(o);const e=document.createElement("div");e.className="div-contenedor-talleres";const s=document.createElement("h2");s.textContent="Eventos";const r=document.createElement("div");r.className="organizar-talleres",localStorage.getItem("token");const i=await E("/eventos");console.log("ya funciona eventos",i),B(i,"evento",r).then(()=>{R()}),e.append(a,s,r),t.append(e),n.append(t)},W=async()=>{const n=document.querySelector("main");n.innerHTML="";const t=document.createElement("section");t.className="section-sobre-nosotros",t.innerHTML=`  <div id="div-fondo">
      <img src="./assets/curva2.svg" />
    </div>
    <div id="div-contenedor-nosotros">
      <h2>Sobre Nosotros</h2>
      <div id="contenedor-general-info">
        <div id="contenedor-info1">
          <div id="div-texto">
            <h3>Compromiso con el aprendizaje</h3>
            <p>
             En Skillshare, creemos que todos tienen algo valioso que enseñar y mucho que aprender. Queremos romper las barreras de acceso al conocimiento, permitiendo que cualquier persona pueda explorar nuevas áreas de interés o profundizar en su especialidad, compartiendo conocimientos en una comunidad que valora el crecimiento personal y profesional.
            </p>
          </div>
          <div id="div-icono">
            <img id="icono" src="./assets/iconollave.svg" alt="icono llave" />
          </div>
        </div>
             <div id="contenedor-info1">
              
          <div id="div-texto">
            <h3>Nuestra Comunidad</h3>
            <p>
            Nuestra comunidad está formada por personas curiosas y apasionadas que buscan aprender de los demás y compartir su experiencia con generosidad. Aquí, los instructores no son solo maestros, sino también compañeros en el viaje de aprendizaje. Creemos en la colaboración como la clave para el desarrollo, y cada miembro aporta algo único y valioso.
            </p>
          </div>
         <div id="div-icono">
            <img id="icono" src="./assets/iconocompartir.svg" alt="icono llave" />
          </div>
        </div>
             <div id="contenedor-info1">
          <div id="div-texto">
            <h3>Impacto y Futuro</h3>
            <p>
             Con cada taller y cada participante, seguimos ampliando el acceso al aprendizaje en todos los rincones del mundo. Creemos que el futuro de la educación es colaborativo, y en Skillshare estamos comprometidos a liderar este cambio, impulsando el aprendizaje continuo y compartido. ¿Te unes a esta aventura?.
            </p>
          </div>
          <div id="div-icono">
            <img id="icono" src="./assets/iconofuturo.svg" alt="icono llave" />
          </div>
        </div>
                
      </div>
    </div>`,n.append(t)},q=async()=>{const n=document.querySelector("main");n.innerHTML="";const t=document.createElement("section");t.className="section-talleres";const a=document.createElement("div");a.className="div-fondo";const o=document.createElement("img");o.src="./assets/amarillo.svg",o.className="curva";const e=document.createElement("div");e.className="div-repeat",a.append(o,e);const s=document.createElement("div");s.className="div-contenedor-talleres";const r=document.createElement("h2");r.textContent="Talleres";const i=document.createElement("div");i.className="organizar-talleres";const l=await E("/talleres");console.log("ya funciona",l),l.forEach(d=>{const c=document.createElement("div");c.className="taller-item",c.id=`taller-${d._id}`}),B(l,"taller",i).then(()=>{R()}),s.append(a,r,i),t.append(s),n.append(t)},X=async()=>{const n=document.querySelector("main");n.innerHTML="";const t=document.createElement("section");t.id="mi-espacio-section",t.innerHTML=`
    <div id="div-fondo">
      <img src="./assets/amarillouser.svg">
    </div>
    <div id="div-contenedor-user">
      <div id="div-info1">
        <h1 id="nombre-usuario"></h1>
        <div class="profile-container">
          <input type="file" id="profile-upload" accept="image/*" style="display: none;" />
          <label for="profile-upload" class="profile-label">
            <img src="default-profile.png" alt="" class="profile-image" id="profile-image" />
          </label>
        </div>
        <p id="email"></p>
        <div id="buttons-container">
   
      <button id="cerrar-sesion">Cerrar Sesión</button>
    </div>
      </div>
      <div id="perfil-info">
        <div id="div-talleres">
          <div id="div-t-reservados">
          
              <img id="icono" src="./assets/treservados.png"  />
            <h3 id="toggle-reservados">
              <i class="fas fa-calendar-check"></i> Talleres Reservados 
            </h3>
            <ul id="talleres-reservados"></ul>
          </div>
          <div id="div-t-impartidos">
             <img id="icono" src="./assets/timpartidos.png"  />
            <h3 id="toggle-impartidos">
              <i class="fas fa-chalkboard-teacher"></i> Talleres Impartidos 
            </h3>
            <ul id="talleres-impartidos"></ul>
          </div>
        </div>
        <div id="div-eventos">
         <img id="icono" src="./assets/ereservados.png"  />
          <h3 id="toggle-eventos">
            <i class="fas fa-calendar"></i> Eventos Reservados
          </h3>
          <ul id="eventos-reservados"></ul>
        </div>
      </div>
    </div>
       <div id="contenedor-tus-talleres">
           <div class="div-titulo-talleres">
             <h2>Tus talleres</h2>
         <button id="crear-taller">Crear Taller</button>
           </div>
    
      <div id="div-tus-talleres">
        
      </div>
    </div>
`,console.log("Cargando Mi Espacio..."),Z(),n.append(t);const a=document.getElementById("profile-upload"),o=document.getElementById("profile-image"),e=localStorage.getItem("profileImage");e&&(o.src=e),a&&o?a.addEventListener("change",c=>{const m=c.target.files[0];if(m){const u=new FileReader;u.onload=p=>{const h=p.target.result;o.src=h,localStorage.setItem("profileImage",h)},u.readAsDataURL(m)}else console.log("No se seleccionó ningún archivo o el archivo no es válido.")}):console.error("no se encuentra en el dom");const s=c=>{const m=document.getElementById(c),u=m.style.display==="none"?"block":"none";m.style.display=u};document.getElementById("toggle-reservados").addEventListener("click",()=>{s("talleres-reservados")}),document.getElementById("toggle-impartidos").addEventListener("click",()=>{s("talleres-impartidos")}),document.getElementById("toggle-eventos").addEventListener("click",()=>{s("eventos-reservados")}),document.getElementById("cerrar-sesion").addEventListener("click",ee),document.getElementById("crear-taller").addEventListener("click",()=>{const c=Q();t.appendChild(c)});const l=document.getElementById("div-tus-talleres");async function d(){try{const c=await E("/talleres/user-talleres",{method:"GET"});B(c,"taller",l,!0)}catch(c){console.error("Error al cargar los talleres:",c)}}console.log(l),d()},Z=async()=>{if(!localStorage.getItem("token")){alert("No estás autenticado");return}try{const t=await E("/users/perfil");document.getElementById("nombre-usuario").textContent=t.name,document.getElementById("email").textContent=t.email;const a=(o,e,s,r)=>{const i=document.getElementById(o);e.forEach(l=>{const d=document.createElement("li");d.dataset.id=l._id;const c=document.createElement("div");c.className="title-div",c.textContent=`👉 ${l.titulo}`;const m=document.createElement("button");m.textContent="Desapuntarse",m.classList.add("unreserve-button"),m.addEventListener("click",async u=>{u.stopPropagation(),await te(l._id,r,i,d)}),c.appendChild(m),d.appendChild(c),d.addEventListener("click",()=>{const u=s.name.toLowerCase(),p=l._id;C({page:u,id:p})}),i.appendChild(d)})};a("talleres-reservados",t.talleresReservados,q,"taller"),a("talleres-impartidos",t.talleresImpartidos,q,"taller"),a("eventos-reservados",t.eventosReservados,F,"evento")}catch(t){console.error("Error al obtener el perfil:",t)}};function ee(){localStorage.removeItem("token"),document.cookie="token=; Max-Age=0; path=/;",localStorage.removeItem("user"),window.location.hash="#prehome",location.reload()}const te=async(n,t,a,o)=>{if(!localStorage.getItem("token")){alert("No estás autenticado");return}try{const s=t==="taller"?"talleres":`${t}s`,r=await E(`/${s}/desapuntarse/`,{method:"POST",body:JSON.stringify({id:n})});if(r&&r.message==="Desapuntado con éxito")alert(`Te has desapuntado del ${t} exitosamente`),a.removeChild(o);else{const i=await r.json();alert(`Error: ${i.error||`No se pudo desapuntar del ${t}`}`)}}catch(s){console.error(`Error al desapuntarse del ${t}:`,s),alert(`Ocurrió un error al intentar desapuntarse del ${t}`)}},oe=n=>{const t=document.createElement("div");return t.className="div-design",n.forEach((a,o)=>{const e=document.createElement("img");e.className=`img${o+1}`,e.src=a,t.appendChild(e)}),t},_=()=>{const n=document.querySelector("main");n.innerHTML="";const t=document.querySelector("header");t&&(t.style.display="none");const a=document.createElement("div");a.className="div-fondo";const o=document.createElement("div");o.className="page-for-login";const e=document.createElement("div");e.className="div-h1";const s=document.createElement("h1");s.className="h1-nombre",s.textContent="skillshare",e.append(s);const i=oe(["./assets/comida.png","./assets/diseño.png","./assets/pc.png"]);i.className="div-design";const l=document.createElement("div");l.className="div-login",l.appendChild(e),o.append(l,i),a.append(o),ne(l);const d=document.createElement("div");d.className="register-div";const c=document.createElement("p");c.textContent="¿Aún no tienes cuenta?";const m=document.createElement("button");m.className="button-register",m.textContent="Únete",d.append(c,m),n.appendChild(a),l.append(d),d.style.display="flex";const u=document.createElement("div");u.className="register-form-div",$(u),u.style.display="none",n.appendChild(u),m.addEventListener("click",()=>{C("registro")})},ne=n=>{const t=H("¡Bienvenide de nuevo!",n,{},"login");t.className="form";const a=t.querySelector('input[placeholder="email"]'),o=t.querySelector('input[placeholder="contraseña"]');t.addEventListener("submit",async e=>{e.preventDefault();const s=a.value,r=o.value,i=t.querySelector(".error-msg");if(i&&i.remove(),!s||!r){const l=document.createElement("p");l.className="error-msg",l.textContent="El email y la contraseña son obligatorios",t.append(l);return}try{const l=await E("/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:r})});if(console.log("Respuesta de la API:",l),l&&l.token&&l.user)localStorage.setItem("token",l.token),localStorage.setItem("user",JSON.stringify(l.user)),console.log("Inicio de sesión exitoso:",l),C("home");else{const d=document.createElement("p");d.textContent="Error al iniciar sesión, datos incorrectos.",d.className="error-msg",t.append(d)}}catch(l){console.error("Error al iniciar sesión:",l)}})};window.addEventListener("popstate",()=>{const t=window.location.hash.slice(1)||"home";C(t)});const C=async n=>{const t=document.querySelector("header"),a=document.querySelector("main");a.innerHTML="";let o=null,e=null;if(o==="login"||o==="registro"?t.style.display="none":t.style.display="block",typeof n=="string")o=n;else if(typeof n=="object"&&n!==null)o=n.page||null,e=n.id||null;else{console.error('El argumento "pageOrObject" no es válido:',n);return}if(!o){console.error("No se proporcionó una página válida para navegar.");return}const s=`#${o.toLowerCase().replace(/\s+/g,"-")}`;e?window.history.pushState({},o,`${s}?id=${e}`):window.location.hash===`#${o.toLowerCase().replace(/\s+/g,"-")}`?window.history.replaceState({},o,`${s}`):window.history.pushState({},o,`${s}`),localStorage.setItem("currentPage",o);try{switch(console.log(`Navegando a la página: ${o}${e?` con ID: ${e}`:""}`),o){case"home":await A();break;case"talleres":await q(e);break;case"eventos":await F(e);break;case"mi-espacio":await X();break;case"sobre-nosotros":await W();break;case"prehome":await O();break;case"login":await _();break;case"registro":await $(a);break;default:await A()}}catch(r){console.error("Error al navegar:",r)}},A=async()=>{const n=document.querySelector("main"),t=document.getElementById("app2");t.innerHTML="",n.innerHTML="";const a=document.createElement("div");a.className="div-fondo-home";const o=document.createElement("img");o.className="curva-fondo",o.src="./assets/amarillo.svg",a.append(o);const e=document.createElement("div");e.className="div-home",a.append(e);const s=document.createElement("div");s.className="div-texto";const r=document.createElement("h1");r.className="h1-skills",r.textContent="skillshare";const i=document.createElement("h2");i.className="h2-info",i.textContent="La web donde podrás aprender y enseñar de todo";let{divButtons:l,button1:d,button2:c}=L("< Sobre Nosotros","Ver más talleres >");c.addEventListener("click",()=>{C("talleres")}),d.addEventListener("click",()=>{C("sobre-nosotros")}),s.append(r,i,l),e.appendChild(s);const m=document.createElement("div");m.className="div-talleres";const u=await E("/talleres");console.log(u),ae(u,m),m.querySelectorAll(".div-taller").forEach(h=>{h.addEventListener("click",()=>{const g=h.getAttribute("data-id");g&&(window.history.pushState({},"Talleres",`#talleres?id=${g}`),C({page:"talleres",id:g}))})}),e.append(m),n.appendChild(a)},ae=(n,t)=>{const a=n.slice(0,4);for(const o of a){const e=document.createElement("div");e.className="div-taller",e.setAttribute("data-id",o._id);const s=document.createElement("div");s.className="div-img";const r=document.createElement("img");r.className="img-taller";const i=document.createElement("h3");i.className="titulo-taller",r.src=o.img,i.textContent=o.titulo,s.append(r),e.append(s),e.append(i),t.append(e)}},$=n=>{n.innerHTML="";const t=document.querySelector("header");t&&(t.style.display="none");const a=document.createElement("div");a.className="register-only";const o=document.createElement("div");o.className="div-fondo";const e=document.createElement("div");e.className="page-for-login";const s=document.createElement("div");s.className="div-login";const r=document.createElement("div");r.className="div-h1";const i=document.createElement("h1");i.className="h1-nombre",i.textContent="skillshare",r.append(i),s.append(r);const l=document.createElement("div");l.className="div-design";const d=document.createElement("img");d.className="img-register",d.src="./assets/redes.png",l.append(d),e.append(s,l),o.append(e),a.append(o);const c=H("Registrarse",n,{nombre:!0},"registro");c.className="form-register";const m=document.createElement("p");m.className="error-msg",m.style.display="none",c.appendChild(m);const u=c.querySelector('input[placeholder="nombre"]'),p=c.querySelector('input[placeholder="email"]'),h=c.querySelector('input[placeholder="contraseña"]'),g=f=>{m.textContent=f,m.style.display="flex"};c.addEventListener("submit",async f=>{f.preventDefault();const S=u.value.trim(),x=p.value.trim(),I=h.value.trim();if(!S||!x||!I){g("El nombre, el email y la contraseña son obligatorios.");return}if(I.length<10){g("La contraseña debe tener al menos 10 caracteres.");return}try{const v=await E("/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S,email:x,password:I})});if(console.log("Respuesta de la API:",v),v&&v.message&&v.message.includes("Este usuario ya está registrado")){g("El usuario ya está registrado.");return}v&&v.token&&v.user?(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.setItem("user",JSON.stringify(v.user)),localStorage.setItem("token",v.token),console.log("Registro exitoso:",v),a.style.display="none",C("home")):g("Error en la solicitud de registro.")}catch(v){console.error("Error al registrar el usuario:",v),g("Error al registrar el usuario.")}m.style.display="none"}),s.append(c),n.appendChild(a)},O=async()=>{const n=document.querySelector("#app");n.id="app";const t=document.querySelector("#app2");t.id="app2";const a=document.querySelector("header");a&&(a.style.display="none");const o=document.createElement("div");o.className="mini-header",o.innerHTML='<p> <a href="#login" id="loginlink">Inicia sesión</a> si ya estás registrado</p>',n.append(o);const e=document.createElement("div");e.className="div-prehome";const s=document.createElement("div");s.className="div-info";const r=document.createElement("div");r.className="div-texto";const i=document.createElement("h2");i.className="h2-texto",i.textContent="¿Quieres que te ayudemos a encontrar la pieza que falta?";const l=document.createElement("p");l.textContent="Haz click en el puzle para saber más";const d=document.createElement("button");d.className="button-puzzle";const c=document.createElement("img");c.className="img-puzzle",c.src="./assets/puzle7.png",d.append(c),d.addEventListener("click",se),r.append(i,l),s.append(r,d),e.append(s),t.append(e)},se=()=>{const n=document.getElementById("app"),t=document.getElementById("app2");t.innerHTML="";const a=document.createElement("div");a.className="div-prehome2";const o=document.createElement("div");o.className="div-info2";const e=document.createElement("h2");e.className="texto2",e.textContent="Bienvenido a Skillshare, la plataforma donde aprender y enseñar no tiene límites. Encuentra inspiración en cada clase.";const s=document.createElement("img");s.src="./assets/gif.gif",s.className="gif";const r=document.createElement("div");r.className="div-registrate";const i=document.createElement("a");i.textContent="Regístrate ",i.href="#registro",i.id="a-registrate";const l=document.createElement("h2");l.textContent="y empieza a explorar un mundo de posibilidades.",l.className="h2-registrate",r.append(i,l);const d=document.createElement("div"),c=document.getElementsByClassName("mini-header");i.addEventListener("click",m=>{m.preventDefault(),a.style.display="none",c[0]&&(c[0].style.display="none"),$(d),n.appendChild(d)}),o.append(e,s,r),a.append(o),t.append(a)},re=n=>{const t=document.querySelector("header"),a=document.createElement("nav"),o=document.createElement("button");o.classList.add("burger-button"),o.innerHTML="&#9776;",t.append(o);const e=[{texto:"Home",href:"#home",funcion:()=>n("home")},{texto:"Talleres",href:"#talleres",funcion:()=>n("talleres")},{texto:"Eventos",href:"#eventos",funcion:()=>n("eventos")},{texto:"Mi Espacio",href:"#mi-espacio",funcion:()=>n("mi-espacio")}];for(const s of e){const r=document.createElement("a");r.textContent=s.texto,r.href=s.href,r.addEventListener("click",i=>{i.preventDefault(),console.log("Ruta clickeada:",s.texto),s.funcion()}),a.append(r)}t.append(a),o.addEventListener("click",()=>{a.classList.toggle("hidden")})},ie=()=>{const n=document.createElement("footer");n.innerHTML=`
   
      <div class="footer-copyright">
        <p>&copy; ${new Date().getFullYear()} Página creada por Nuria Morcillo Bonillo</p>
      </div>
    </div>
  `,document.body.appendChild(n)},le=()=>{const n=document.querySelector("#app"),t=document.createElement("header"),a=document.createElement("main");n.appendChild(t),n.appendChild(a),re(C),O()};le();ie();document.addEventListener("click",n=>{if(n.target.id==="loginlink"){const a=document.querySelector(".div-prehome"),o=document.querySelector(".div-prehome2"),e=document.querySelector(".mini-header");a&&(a.style.display="none"),o&&(o.style.display="none"),e&&(e.style.display="none"),_()}});
