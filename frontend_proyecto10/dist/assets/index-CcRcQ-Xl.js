(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}})();const A=()=>{const o=document.createElement("div");return o.className="spinner",o.innerHTML='<div class="loading"></div>',o};document.body.appendChild(A());async function y(o,t={}){const a="http://localhost:3000/api/v1",n=localStorage.getItem("token"),e={};n&&(e.Authorization=`Bearer ${n}`),t.body instanceof FormData?delete e["Content-Type"]:e["Content-Type"]="application/json";const s={method:t.method||"GET",headers:{...e,...t.headers},body:t.body};Y();try{console.log("URL completa:",`${a}${o}`),console.log("Configuración de la solicitud:",s);const r=await fetch(`${a}${o}`,s);let i;try{i=await r.json()}catch{console.error("Detalles del error:",error.message),i=null}if(!r.ok){const l=(i==null?void 0:i.message)||"Error en la solicitud";throw new Error(l)}return K(),i||r}catch(r){throw console.error("Error en fetch:",r.message),r}}function Y(){const o=document.querySelector(".spinner");console.log("Mostrando spinner:",o),o&&(o.style.display="flex")}function K(){const o=document.querySelector(".spinner");o&&(o.style.display="none")}const H=(o,t,a={},n)=>{const e=document.createElement("form"),s=document.createElement("h2");s.textContent=o,e.appendChild(s);const r=document.createElement("div");if(r.className="input-container",a.nombre){const c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("placeholder","nombre"),c.setAttribute("name","name"),c.setAttribute("autocomplete","name"),r.appendChild(c)}const i=document.createElement("input");i.setAttribute("type","email"),i.setAttribute("placeholder","email"),i.setAttribute("name","email"),i.setAttribute("autocomplete","email"),r.appendChild(i);const l=document.createElement("input");l.setAttribute("type","password"),l.setAttribute("placeholder","contraseña"),l.setAttribute("name","password"),l.setAttribute("autocomplete","current-password"),r.appendChild(l),e.appendChild(r);const d=document.createElement("button");return d.setAttribute("type","submit"),n==="registro"?d.textContent="Regístrate":d.textContent="Iniciar sesión",e.appendChild(d),t.appendChild(e),e},Q=()=>{const o=document.createElement("div");o.className="crear-taller-container";const t=document.createElement("form");t.innerHTML=`
    <div class="input-container">
      <input type="text" id="titulo" placeholder="Título del taller" required />
    </div>
    <div class="input-container">
      <input type="file" id="img" accept="image/*" />
    </div>
    <div class="input-container">
      <textarea id="descripcion" placeholder="Descripción" required></textarea>
    </div>
    <div class="input-container">
      <input type="text" id="modalidad" placeholder="Modalidad (presencial/online)" required />
    </div>
    <div class="input-container">
      <input type="number" id="plazas" placeholder="Número de plazas" required />
    </div>
    <div class="input-container">
      <input type="text" id="duracion" placeholder="Duración (ej: 2h)" required />
    </div>
    <div class="input-container">
      <input type="number" id="price" placeholder="Precio (€)" required />
    </div>
    <button type="submit">Crear Taller</button>
    <div class="error-msg"></div>
  `;const a=document.createElement("button");a.className="close-button",a.innerHTML="&times;",a.title="Cerrar formulario";const n=localStorage.getItem("token");if(!n){console.error("Token no encontrado. Asegúrate de que el usuario esté autenticado.");return}return a.addEventListener("click",e=>{e.preventDefault(),o.remove()}),t.addEventListener("submit",async e=>{e.preventDefault(),e.preventDefault();const s=document.getElementById("titulo").value,r=document.getElementById("descripcion").value,i=document.getElementById("modalidad").value,l=document.getElementById("plazas").value,d=document.getElementById("duracion").value,c=document.getElementById("price").value,m=document.getElementById("img").files[0],u=new FormData;u.append("titulo",s),u.append("descripcion",r),u.append("modalidad",i),u.append("plazas",l),u.append("duracion",d),u.append("price",c),m&&u.append("img",m);try{await y("/talleres/",{method:"POST",body:u,headers:{Authorization:`Bearer ${n}`}})?(alert("¡Taller creado con éxito!"),t.reset()):console.error("El backend no devolvió datos.")}catch(p){console.error("Error al enviar el formulario:",p.message)}}),t.appendChild(a),o.appendChild(t),o};function B(o,t){const a=document.createElement("div");a.className="div-buttons";const n=document.createElement("button");n.className="button1",n.textContent=o,n.setAttribute("data-role","button1");const e=document.createElement("button");return e.className="button2",e.textContent=t,e.setAttribute("data-role","button2"),a.append(n,e),{divButtons:a,button1:n,button2:e}}const D=async(o,t,a,n=!1)=>{for(const e of o){const s=t==="taller"?"talleres":"eventos",r=document.createElement("div");r.className="div-taller";const i=document.createElement("div");i.className="div-info1";const l=document.createElement("div");l.className="div-img";const d=document.createElement("img");d.src=e.img,l.append(d);const c=document.createElement("div");c.className="div-texto1";const m=document.createElement("h3");m.textContent=e.titulo;const u=document.createElement("p");u.className="p-reducido",u.textContent=e.descripcion.slice(0,250)+"...";let p,g,v;if(!n)({divButtons:p,button1:g,button2:v}=B("< Saber Más","Apuntarme >")),g.className="button1a",g.dataset.id=e._id,v.className="button2",v.dataset.id=e._id,c.append(m,u),i.append(c,p);else{p=document.createElement("div"),p.className="div-buttons";const E=document.createElement("button");E.textContent="Eliminar Taller",E.className="button-eliminar",E.addEventListener("click",async()=>{const b=localStorage.getItem("token");if(!b){alert("No estás autorizado");return}if(window.confirm("¿Estás seguro que quieres eliminar el taller?"))try{const f=await y(`/talleres/${e._id}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});f&&f.message==="Elemento eliminado"?(alert("Taller eliminado con éxito"),r.remove()):alert(f.error||"Error al eliminar el taller")}catch(f){console.error("Error al intentar eliminar:",f.message)}else console.log("Eliminación del taller cancelada.")}),p.append(E),c.append(m,u),i.append(c,p)}r.append(l,i);const h=document.createElement("div");h.className="div-info-completa",h.style.display="none";const w=document.createElement("p");w.textContent=e.descripcion;let C;t==="taller"?(C=document.createElement("h5"),C.textContent=`Impartido por ${e.user.name}`):t==="evento"&&(C=document.createElement("h5"),C.textContent=`Fecha: ${e.fecha}`);const I=document.createElement("h4");I.textContent=`Modalidad: ${e.modalidad}`;const x=document.createElement("h4");x.textContent=`Plazas: ${e.plazas}`;const S=document.createElement("h4");S.textContent=`Duración: ${e.duracion}`;const k=document.createElement("h4");k.textContent=`Precio: ${e.price}€`;let{divButtons:O,button1:U,button2:M}=B("< Mostrar menos","Apuntarme >");M.className="button2",M.dataset.id=e._id;const L=document.createElement("div");L.className="div-caract",L.append(I,x,S,k),h.append(w,C,L,O),c.append(h);const q=g;q==null||q.addEventListener("click",()=>{window.history.pushState({},"Talleres",`#talleres?id=${e._id}`),u.style.display="none",p.style.display="none",h.style.display="flex",h.classList.add("mostrar"),r.classList.add("expanded"),l.classList.add("expanded")}),U.addEventListener("click",()=>{u.style.display="flex",p.style.display="flex",h.style.display="none",h.classList.remove("mostrar"),r.classList.remove("expanded"),l.classList.remove("expanded")});const J=r.querySelectorAll(".button2");let T=await V(t);J.forEach(E=>{const b=e._id;console.log(b),T.includes(b)&&(E.textContent="¡Ya estás apuntado!",E.disabled=!0),E.addEventListener("click",async()=>{if(!localStorage.getItem("token")){alert("No estás autorizado. Por favor, inicia sesión para continuar.");return}try{const f=await y(`/${s}/apuntarse/`,{method:"POST",body:JSON.stringify({id:b})});f&&f.message==="Reservado con éxito"?(E.textContent="¡Ya estás apuntado!",E.disabled=!0,console.log("Estado antes de añadir:",{itemId:b,reservedItems:T}),T.includes(b)||(T.push(b),console.log("IDs reservados después:",T))):alert(f.error||`Error al intentar apuntarse al ${t}`)}catch(f){console.error("Error al intentar reservar:",f.message),alert("Error de conexión. Por favor, intenta de nuevo más tarde.")}})}),a&&a.append(r)}},V=async o=>{try{const t=o==="taller"?"talleresReservados":"eventosReservados",n=((await y("/users/perfil",{method:"GET"}))[t]||[]).map(e=>e._id);return console.log(`IDs reservados (${t}):`,n),n}catch(t){return console.error("Error al obtener los elementos reservados:",t),[]}},F=()=>{const t=new URLSearchParams(window.location.hash.split("?")[1]).get("id");console.log(t),t&&setTimeout(()=>{const a=document.querySelector(`.button1a[data-id="${t}"]`);console.log(a),a?(a.click(),setTimeout(()=>{const n=document.querySelector(".div-taller.expanded");n&&n.scrollIntoView({behavior:"smooth",block:"center"})},100)):console.log("No se encontró el botón con el ID",t)},100)},R=async()=>{const o=document.querySelector("main");o.innerHTML="";const t=document.createElement("section");t.className="section-talleres";const a=document.createElement("div");a.className="div-fondo";const n=document.createElement("img");n.src="./assets/waveamarilla.svg",n.className="curva",a.append(n);const e=document.createElement("div");e.className="div-contenedor-talleres";const s=document.createElement("h2");s.textContent="Eventos";const r=document.createElement("div");r.className="organizar-talleres",localStorage.getItem("token");const i=await y("/eventos");console.log("ya funciona eventos",i),D(i,"evento",r).then(()=>{F()}),e.append(a,s,r),t.append(e),o.append(t)},W=async()=>{const o=document.querySelector("main");o.innerHTML="";const t=document.createElement("section");t.className="section-sobre-nosotros",t.innerHTML=`  <div id="div-fondo">
      <img src="./assets/curva2.svg" />
    </div>
    <div id="div-contenedor-nosotros">
      <h2>Sobre Nosotros</h2>
      <div id="contenedor-general-info">
        <div id="contenedor-info1">
          <div id="div-texto">
            <h3>Compromiso con el aprendizaje</h3>
            <p>
             En Skillshare, creemos que todos tienen algo valioso que enseñar y mucho que aprender. Queremos romper las barreras de acceso al conocimiento, permitiendo que cualquier persona pueda explorar nuevas áreas de interés o profundizar en su especialidad, compartiendo conocimientos en una comunidad que valora el crecimiento personal y profesional.
            </p>
          </div>
          <div id="div-icono">
            <img id="icono" src="./assets/iconollave.svg" alt="icono llave" />
          </div>
        </div>
             <div id="contenedor-info1">
              
          <div id="div-texto">
            <h3>Nuestra Comunidad</h3>
            <p>
            Nuestra comunidad está formada por personas curiosas y apasionadas que buscan aprender de los demás y compartir su experiencia con generosidad. Aquí, los instructores no son solo maestros, sino también compañeros en el viaje de aprendizaje. Creemos en la colaboración como la clave para el desarrollo, y cada miembro aporta algo único y valioso.
            </p>
          </div>
         <div id="div-icono">
            <img id="icono" src="./assets/iconocompartir.svg" alt="icono llave" />
          </div>
        </div>
             <div id="contenedor-info1">
          <div id="div-texto">
            <h3>Impacto y Futuro</h3>
            <p>
             Con cada taller y cada participante, seguimos ampliando el acceso al aprendizaje en todos los rincones del mundo. Creemos que el futuro de la educación es colaborativo, y en Skillshare estamos comprometidos a liderar este cambio, impulsando el aprendizaje continuo y compartido. ¿Te unes a esta aventura?.
            </p>
          </div>
          <div id="div-icono">
            <img id="icono" src="./assets/iconofuturo.svg" alt="icono llave" />
          </div>
        </div>
                
      </div>
    </div>`,o.append(t)},$=async()=>{const o=document.querySelector("main");o.innerHTML="";const t=document.createElement("section");t.className="section-talleres";const a=document.createElement("div");a.className="div-fondo";const n=document.createElement("img");n.src="./assets/amarillo.svg",n.className="curva";const e=document.createElement("div");e.className="div-repeat",a.append(n,e);const s=document.createElement("div");s.className="div-contenedor-talleres";const r=document.createElement("h2");r.textContent="Talleres";const i=document.createElement("div");i.className="organizar-talleres";const l=await y("/talleres");console.log("ya funciona",l),l.forEach(d=>{const c=document.createElement("div");c.className="taller-item",c.id=`taller-${d._id}`}),D(l,"taller",i).then(()=>{F()}),s.append(a,r,i),t.append(s),o.append(t)},X=async()=>{const o=document.querySelector("main");o.innerHTML="";const t=document.createElement("section");t.id="mi-espacio-section",t.innerHTML=`
    <div id="div-fondo">
      <img src="./assets/amarillouser.svg">
    </div>
    <div id="div-contenedor-user">
      <div id="div-info1">
        <h1 id="nombre-usuario"></h1>
        <div class="profile-container">
          <input type="file" id="profile-upload" accept="image/*" style="display: none;" />
          <label for="profile-upload" class="profile-label">
            <img src="default-profile.png" alt="" class="profile-image" id="profile-image" />
          </label>
        </div>
        <p id="email"></p>
        <div id="buttons-container">
   
      <button id="cerrar-sesion">Cerrar Sesión</button>
    </div>
      </div>
      <div id="perfil-info">
        <div id="div-talleres">
          <div id="div-t-reservados">
          
              <img id="icono" src="./assets/treservados.png"  />
            <h3 id="toggle-reservados">
              <i class="fas fa-calendar-check"></i> Talleres Reservados 
            </h3>
            <ul id="talleres-reservados"></ul>
          </div>
          <div id="div-t-impartidos">
             <img id="icono" src="./assets/timpartidos.png"  />
            <h3 id="toggle-impartidos">
              <i class="fas fa-chalkboard-teacher"></i> Talleres Impartidos 
            </h3>
            <ul id="talleres-impartidos"></ul>
          </div>
        </div>
        <div id="div-eventos">
         <img id="icono" src="./assets/ereservados.png"  />
          <h3 id="toggle-eventos">
            <i class="fas fa-calendar"></i> Eventos Reservados
          </h3>
          <ul id="eventos-reservados"></ul>
        </div>
      </div>
    </div>
       <div id="contenedor-tus-talleres">
           <div class="div-titulo-talleres">
             <h2>Tus talleres</h2>
         <button id="crear-taller">Crear Taller</button>
           </div>
    
      <div id="div-tus-talleres">
        
      </div>
    </div>
`,console.log("Cargando Mi Espacio..."),Z(),o.append(t);const a=document.getElementById("profile-upload"),n=document.getElementById("profile-image"),e=localStorage.getItem("profileImage");e&&(n.src=e),a&&n?a.addEventListener("change",c=>{const m=c.target.files[0];if(m){const u=new FileReader;u.onload=p=>{const g=p.target.result;n.src=g,localStorage.setItem("profileImage",g)},u.readAsDataURL(m)}else console.log("No se seleccionó ningún archivo o el archivo no es válido.")}):console.error("no se encuentra en el dom");const s=c=>{const m=document.getElementById(c),u=m.style.display==="none"?"block":"none";m.style.display=u};document.getElementById("toggle-reservados").addEventListener("click",()=>{s("talleres-reservados")}),document.getElementById("toggle-impartidos").addEventListener("click",()=>{s("talleres-impartidos")}),document.getElementById("toggle-eventos").addEventListener("click",()=>{s("eventos-reservados")}),document.getElementById("cerrar-sesion").addEventListener("click",ee),document.getElementById("crear-taller").addEventListener("click",()=>{const c=Q();t.appendChild(c)});const l=document.getElementById("div-tus-talleres");async function d(){try{const c=await y("/talleres/user-talleres",{method:"GET"});D(c,"taller",l,!0)}catch(c){console.error("Error al cargar los talleres:",c)}}console.log(l),d()},Z=async()=>{if(!localStorage.getItem("token")){alert("No estás autenticado");return}try{const t=await y("/users/perfil");document.getElementById("nombre-usuario").textContent=t.name,document.getElementById("email").textContent=t.email;const a=(n,e,s,r)=>{const i=document.getElementById(n);e.forEach(l=>{const d=document.createElement("li");d.dataset.id=l._id;const c=document.createElement("div");c.className="title-div",c.textContent=`👉 ${l.titulo}`;const m=document.createElement("button");m.textContent="Desapuntarse",m.classList.add("unreserve-button"),m.addEventListener("click",async u=>{u.stopPropagation(),await te(l._id,r,i,d)}),c.appendChild(m),d.appendChild(c),d.addEventListener("click",()=>{const u=s.name.toLowerCase(),p=l._id;N({page:u,id:p})}),i.appendChild(d)})};a("talleres-reservados",t.talleresReservados,$,"taller"),a("talleres-impartidos",t.talleresImpartidos,$,"taller"),a("eventos-reservados",t.eventosReservados,R,"evento")}catch(t){console.error("Error al obtener el perfil:",t)}};function ee(){localStorage.removeItem("token"),document.cookie="token=; Max-Age=0; path=/;",localStorage.removeItem("user"),window.location.hash="#prehome",location.reload()}const te=async(o,t,a,n)=>{if(!localStorage.getItem("token")){alert("No estás autenticado");return}try{const s=t==="taller"?"talleres":`${t}s`,r=await y(`/${s}/desapuntarse/`,{method:"POST",body:JSON.stringify({id:o})});if(r&&r.message==="Desapuntado con éxito")alert(`Te has desapuntado del ${t} exitosamente`),a.removeChild(n);else{const i=await r.json();alert(`Error: ${i.error||`No se pudo desapuntar del ${t}`}`)}}catch(s){console.error(`Error al desapuntarse del ${t}:`,s),alert(`Ocurrió un error al intentar desapuntarse del ${t}`)}},ne=o=>{const t=document.createElement("div");return t.className="div-design",o.forEach((a,n)=>{const e=document.createElement("img");e.className=`img${n+1}`,e.src=a,t.appendChild(e)}),t},_=()=>{const o=document.querySelector("main");o.innerHTML="";const t=document.querySelector("header");t&&(t.style.display="none");const a=document.createElement("div");a.className="div-fondo";const n=document.createElement("div");n.className="page-for-login";const e=document.createElement("div");e.className="div-h1";const s=document.createElement("h1");s.className="h1-nombre",s.textContent="skillshare",e.append(s);const i=ne(["./assets/comida.png","./assets/diseño.png","./assets/pc.png"]);i.className="div-design";const l=document.createElement("div");l.className="div-login",l.appendChild(e),n.append(l,i),a.append(n),oe(l);const d=document.createElement("div");d.className="register-div";const c=document.createElement("p");c.textContent="¿Aún no tienes cuenta?";const m=document.createElement("button");m.className="button-register",m.textContent="Únete",d.append(c,m),o.appendChild(a),l.append(d),d.style.display="flex";const u=document.createElement("div");u.className="register-form-div",z(u),u.style.display="none",o.appendChild(u),m.addEventListener("click",()=>{N("registro")})},oe=o=>{const t=H("¡Bienvenide de nuevo!",o,{},"login");t.className="form";const a=A();a.style.display="none",t.appendChild(a);const n=t.querySelector('input[placeholder="email"]'),e=t.querySelector('input[placeholder="contraseña"]');t.addEventListener("submit",async s=>{s.preventDefault();const r=n.value,i=e.value,l=t.querySelector(".error-msg");if(l&&l.remove(),!r||!i){const d=document.createElement("p");d.className="error-msg",d.textContent="El email y la contraseña son obligatorios",t.append(d);return}try{const d=await fetch("http://localhost:3000/api/v1/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:i})});if(a.style.display="none",!d.ok){const m=await d.json(),u=document.createElement("p");u.textContent=m,u.className="error-msg",t.append(u);return}const c=await d.json();localStorage.setItem("token",c.token),localStorage.setItem("user",JSON.stringify(c.user)),console.log("Inicio de sesión exitoso:",c),N("home")}catch(d){console.error("Error al iniciar sesión:",d),a.style.display="none"}})};window.addEventListener("popstate",()=>{const t=window.location.hash.slice(1)||"home";N(t)});const N=async o=>{const t=document.querySelector("header"),a=document.querySelector("main");a.innerHTML="";let n=null,e=null;if(n==="login"||n==="registro"?t.style.display="none":t.style.display="block",typeof o=="string")n=o;else if(typeof o=="object"&&o!==null)n=o.page||null,e=o.id||null;else{console.error('El argumento "pageOrObject" no es válido:',o);return}if(!n){console.error("No se proporcionó una página válida para navegar.");return}const s=`#${n.toLowerCase().replace(/\s+/g,"-")}`;e?window.history.pushState({},n,`${s}?id=${e}`):window.location.hash===`#${n.toLowerCase().replace(/\s+/g,"-")}`?window.history.replaceState({},n,`${s}`):window.history.pushState({},n,`${s}`),localStorage.setItem("currentPage",n);try{switch(console.log(`Navegando a la página: ${n}${e?` con ID: ${e}`:""}`),n){case"home":await P();break;case"talleres":await $(e);break;case"eventos":await R(e);break;case"mi-espacio":await X();break;case"sobre-nosotros":await W();break;case"prehome":await j();break;case"login":await _();break;case"registro":await z(a);break;default:await P()}}catch(r){console.error("Error al navegar:",r)}},P=async()=>{const o=document.querySelector("main"),t=document.getElementById("app2");t.innerHTML="",o.innerHTML="";const a=document.createElement("div");a.className="div-fondo-home";const n=document.createElement("img");n.className="curva-fondo",n.src="./assets/amarillo.svg",a.append(n);const e=document.createElement("div");e.className="div-home",a.append(e);const s=document.createElement("div");s.className="div-texto";const r=document.createElement("h1");r.className="h1-skills",r.textContent="skillshare";const i=document.createElement("h2");i.className="h2-info",i.textContent="La web donde podrás aprender y enseñar de todo";let{divButtons:l,button1:d,button2:c}=B("< Sobre Nosotros","Ver más talleres >");c.addEventListener("click",()=>{N("talleres")}),d.addEventListener("click",()=>{N("sobre-nosotros")}),s.append(r,i,l),e.appendChild(s);const m=document.createElement("div");m.className="div-talleres";const u=await y("/talleres");console.log(u),ae(u,m),m.querySelectorAll(".div-taller").forEach(g=>{g.addEventListener("click",()=>{const v=g.getAttribute("data-id");v&&(window.history.pushState({},"Talleres",`#talleres?id=${v}`),N({page:"talleres",id:v}))})}),e.append(m),o.appendChild(a)},ae=(o,t)=>{const a=o.slice(0,4);for(const n of a){const e=document.createElement("div");e.className="div-taller",e.setAttribute("data-id",n._id);const s=document.createElement("div");s.className="div-img";const r=document.createElement("img");r.className="img-taller";const i=document.createElement("h3");i.className="titulo-taller",r.src=n.img,i.textContent=n.titulo,s.append(r),e.append(s),e.append(i),t.append(e)}},z=o=>{o.innerHTML="";const t=document.querySelector("header");t&&(t.style.display="none");const a=document.createElement("div");a.className="register-only";const n=document.createElement("div");n.className="div-fondo";const e=document.createElement("div");e.className="page-for-login";const s=document.createElement("div");s.className="div-login";const r=document.createElement("div");r.className="div-h1";const i=document.createElement("h1");i.className="h1-nombre",i.textContent="skillshare",r.append(i),s.append(r);const l=document.createElement("div");l.className="div-design";const d=document.createElement("img");d.className="img-register",d.src="./assets/redes.png",l.append(d),e.append(s,l),n.append(e),a.append(n);const c=H("Registrarse",o,{nombre:!0},"registro");c.className="form-register";const m=document.createElement("p");m.className="error-msg",m.style.display="none",c.appendChild(m);const u=c.querySelector('input[placeholder="nombre"]'),p=c.querySelector('input[placeholder="email"]'),g=c.querySelector('input[placeholder="contraseña"]'),v=h=>{m.textContent=h,m.style.display="flex"};c.addEventListener("submit",async h=>{h.preventDefault();const w=u.value.trim(),C=p.value.trim(),I=g.value.trim();if(!w||!C||!I){v("El nombre, el email y la contraseña son obligatorios.");return}if(I.length<10){v("La contraseña debe tener al menos 10 caracteres.");return}m.style.display="none";try{const x=await fetch("http://localhost:3000/api/v1/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:w,email:C,password:I})});if(!x.ok){(await x.json()).message.includes("Este usuario ya está registrado")?v("El usuario ya está registrado."):v("Error en la solicitud de registro.");return}const S=await x.json();console.log("Token:",S.token),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.setItem("user",JSON.stringify(S)),localStorage.setItem("token",S.token),console.log("Registro exitoso:",S),a.style.display="none",N("home")}catch(x){console.error("Error al registrar el usuario:",x),v("Error al registrar el usuario.")}}),s.append(c),o.appendChild(a)},j=async()=>{const o=document.querySelector("#app");o.id="app";const t=document.querySelector("#app2");t.id="app2";const a=document.querySelector("header");a&&(a.style.display="none");const n=document.createElement("div");n.className="mini-header",n.innerHTML='<p> <a href="#login" id="loginlink">Inicia sesión</a> si ya estás registrado</p>',o.append(n);const e=document.createElement("div");e.className="div-prehome";const s=document.createElement("div");s.className="div-info";const r=document.createElement("div");r.className="div-texto";const i=document.createElement("h2");i.className="h2-texto",i.textContent="¿Quieres que te ayudemos a encontrar la pieza que falta?";const l=document.createElement("p");l.textContent="Haz click en el puzle para saber más";const d=document.createElement("button");d.className="button-puzzle";const c=document.createElement("img");c.className="img-puzzle",c.src="./assets/puzle7.png",d.append(c),d.addEventListener("click",se),r.append(i,l),s.append(r,d),e.append(s),t.append(e)},se=()=>{const o=document.getElementById("app"),t=document.getElementById("app2");t.innerHTML="";const a=document.createElement("div");a.className="div-prehome2";const n=document.createElement("div");n.className="div-info2";const e=document.createElement("h2");e.className="texto2",e.textContent="Bienvenido a Skillshare, la plataforma donde aprender y enseñar no tiene límites. Encuentra inspiración en cada clase.";const s=document.createElement("img");s.src="./assets/gif.gif",s.className="gif";const r=document.createElement("div");r.className="div-registrate";const i=document.createElement("a");i.textContent="Regístrate ",i.href="#registro",i.id="a-registrate";const l=document.createElement("h2");l.textContent="y empieza a explorar un mundo de posibilidades.",l.className="h2-registrate",r.append(i,l);const d=document.createElement("div"),c=document.getElementsByClassName("mini-header");i.addEventListener("click",m=>{m.preventDefault(),a.style.display="none",c[0]&&(c[0].style.display="none"),z(d),o.appendChild(d)}),n.append(e,s,r),a.append(n),t.append(a)},re=o=>{const t=document.querySelector("header"),a=document.createElement("nav"),n=document.createElement("button");n.classList.add("burger-button"),n.innerHTML="&#9776;",t.append(n);const e=[{texto:"Home",href:"#home",funcion:()=>o("home")},{texto:"Talleres",href:"#talleres",funcion:()=>o("talleres")},{texto:"Eventos",href:"#eventos",funcion:()=>o("eventos")},{texto:"Mi Espacio",href:"#mi-espacio",funcion:()=>o("mi-espacio")}];for(const s of e){const r=document.createElement("a");r.textContent=s.texto,r.href=s.href,r.addEventListener("click",i=>{i.preventDefault(),console.log("Ruta clickeada:",s.texto),s.funcion()}),a.append(r)}t.append(a),n.addEventListener("click",()=>{a.classList.toggle("hidden")})},ie=()=>{const o=document.createElement("footer");o.innerHTML=`
   
      <div class="footer-copyright">
        <p>&copy; ${new Date().getFullYear()} Página creada por Nuria Morcillo Bonillo</p>
      </div>
    </div>
  `,document.body.appendChild(o)},ce=()=>{const o=document.querySelector("#app"),t=document.createElement("header"),a=document.createElement("main");o.appendChild(t),o.appendChild(a),re(N),j()};ce();ie();document.addEventListener("click",o=>{if(o.target.id==="loginlink"){const a=document.querySelector(".div-prehome"),n=document.querySelector(".div-prehome2"),e=document.querySelector(".mini-header");a&&(a.style.display="none"),n&&(n.style.display="none"),e&&(e.style.display="none"),_()}});
