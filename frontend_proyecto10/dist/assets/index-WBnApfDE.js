(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}})();const G=()=>{const n=document.createElement("div");return n.className="spinner",n.innerHTML='<div class="loading"></div>',n};document.body.appendChild(G());async function E(n,t={}){const a="http://localhost:3000/api/v1";console.log("Base URL utilizada:",a);const o=localStorage.getItem("token"),e={};o&&(e.Authorization=`Bearer ${o}`),t.body instanceof FormData?delete e["Content-Type"]:e["Content-Type"]="application/json";const s={method:t.method||"GET",headers:{...e,...t.headers},body:t.body};Y();try{console.log("URL completa:",`${a}${n}`),console.log("Configuración de la solicitud:",s);const r=await fetch(`${a}${n}`,s);console.log("Respuesta:",r);let i;try{i=await r.json()}catch(c){console.error("Detalles del error:",c.message),i=null}if(!r.ok){const c=(i==null?void 0:i.message)||"Error en la solicitud";throw new Error(c)}return K(),i||r}catch(r){throw console.error("Error en fetch:",r.message),r}}function Y(){const n=document.querySelector(".spinner");console.log("Mostrando spinner:",n),n&&(n.style.display="flex")}function K(){const n=document.querySelector(".spinner");n&&(n.style.display="none")}const A=(n,t,a={},o)=>{const e=document.createElement("form"),s=document.createElement("h2");s.textContent=n,e.appendChild(s);const r=document.createElement("div");if(r.className="input-container",a.nombre){const l=document.createElement("input");l.setAttribute("type","text"),l.setAttribute("placeholder","nombre"),l.setAttribute("name","name"),l.setAttribute("autocomplete","name"),r.appendChild(l)}const i=document.createElement("input");i.setAttribute("type","email"),i.setAttribute("placeholder","email"),i.setAttribute("name","email"),i.setAttribute("autocomplete","email"),r.appendChild(i);const c=document.createElement("input");c.setAttribute("type","password"),c.setAttribute("placeholder","contraseña"),c.setAttribute("name","password"),c.setAttribute("autocomplete","current-password"),r.appendChild(c),e.appendChild(r);const d=document.createElement("button");return d.setAttribute("type","submit"),o==="registro"?d.textContent="Regístrate":d.textContent="Iniciar sesión",e.appendChild(d),t.appendChild(e),e},Q=()=>{const n=document.createElement("div");n.className="crear-taller-container";const t=document.createElement("form");t.innerHTML=`
    <div class="input-container">
      <input type="text" id="titulo" placeholder="Título del taller" required />
    </div>
    <div class="input-container">
      <input type="file" id="img" accept="image/*" />
    </div>
    <div class="input-container">
      <textarea id="descripcion" placeholder="Descripción" required></textarea>
    </div>
    <div class="input-container">
      <input type="text" id="modalidad" placeholder="Modalidad (presencial/online)" required />
    </div>
    <div class="input-container">
      <input type="number" id="plazas" placeholder="Número de plazas" required />
    </div>
    <div class="input-container">
      <input type="text" id="duracion" placeholder="Duración (ej: 2h)" required />
    </div>
    <div class="input-container">
      <input type="number" id="price" placeholder="Precio (€)" required />
    </div>
    <button type="submit">Crear Taller</button>
    <div class="error-msg"></div>
  `;const a=document.createElement("button");a.className="close-button",a.innerHTML="&times;",a.title="Cerrar formulario";const o=localStorage.getItem("token");if(!o){console.error("Token no encontrado. Asegúrate de que el usuario esté autenticado.");return}return a.addEventListener("click",e=>{e.preventDefault(),n.remove()}),t.addEventListener("submit",async e=>{e.preventDefault(),e.preventDefault();const s=document.getElementById("titulo").value,r=document.getElementById("descripcion").value,i=document.getElementById("modalidad").value,c=document.getElementById("plazas").value,d=document.getElementById("duracion").value,l=document.getElementById("price").value,m=document.getElementById("img").files[0],u=new FormData;u.append("titulo",s),u.append("descripcion",r),u.append("modalidad",i),u.append("plazas",c),u.append("duracion",d),u.append("price",l),m&&u.append("img",m);try{await E("/talleres/",{method:"POST",body:u,headers:{Authorization:`Bearer ${o}`}})?(alert("¡Taller creado con éxito!"),t.reset()):console.error("El backend no devolvió datos.")}catch(p){console.error("Error al enviar el formulario:",p.message)}}),t.appendChild(a),n.appendChild(t),n};function B(n,t){const a=document.createElement("div");a.className="div-buttons";const o=document.createElement("button");o.className="button1",o.textContent=n,o.setAttribute("data-role","button1");const e=document.createElement("button");return e.className="button2",e.textContent=t,e.setAttribute("data-role","button2"),a.append(o,e),{divButtons:a,button1:o,button2:e}}const D=async(n,t,a,o=!1)=>{for(const e of n){const s=t==="taller"?"talleres":"eventos",r=document.createElement("div");r.className="div-taller";const i=document.createElement("div");i.className="div-info1";const c=document.createElement("div");c.className="div-img";const d=document.createElement("img");d.src=e.img,c.append(d);const l=document.createElement("div");l.className="div-texto1";const m=document.createElement("h3");m.textContent=e.titulo;const u=document.createElement("p");u.className="p-reducido",u.textContent=e.descripcion.slice(0,250)+"...";let p,g,v;if(!o)({divButtons:p,button1:g,button2:v}=B("< Saber Más","Apuntarme >")),g.className="button1a",g.dataset.id=e._id,v.className="button2",v.dataset.id=e._id,l.append(m,u),i.append(l,p);else{p=document.createElement("div"),p.className="div-buttons";const y=document.createElement("button");y.textContent="Eliminar Taller",y.className="button-eliminar",y.addEventListener("click",async()=>{const b=localStorage.getItem("token");if(!b){alert("No estás autorizado");return}if(window.confirm("¿Estás seguro que quieres eliminar el taller?"))try{const f=await E(`/talleres/${e._id}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}});f&&f.message==="Elemento eliminado"?(alert("Taller eliminado con éxito"),r.remove()):alert(f.error||"Error al eliminar el taller")}catch(f){console.error("Error al intentar eliminar:",f.message)}else console.log("Eliminación del taller cancelada.")}),p.append(y),l.append(m,u),i.append(l,p)}r.append(c,i);const h=document.createElement("div");h.className="div-info-completa",h.style.display="none";const w=document.createElement("p");w.textContent=e.descripcion;let C;t==="taller"?(C=document.createElement("h5"),C.textContent=`Impartido por ${e.user.name}`):t==="evento"&&(C=document.createElement("h5"),C.textContent=`Fecha: ${e.fecha}`);const I=document.createElement("h4");I.textContent=`Modalidad: ${e.modalidad}`;const x=document.createElement("h4");x.textContent=`Plazas: ${e.plazas}`;const S=document.createElement("h4");S.textContent=`Duración: ${e.duracion}`;const k=document.createElement("h4");k.textContent=`Precio: ${e.price}€`;let{divButtons:O,button1:j,button2:M}=B("< Mostrar menos","Apuntarme >");M.className="button2",M.dataset.id=e._id;const L=document.createElement("div");L.className="div-caract",L.append(I,x,S,k),h.append(w,C,L,O),l.append(h);const q=g;q==null||q.addEventListener("click",()=>{window.history.pushState({},"Talleres",`#talleres?id=${e._id}`),u.style.display="none",p.style.display="none",h.style.display="flex",h.classList.add("mostrar"),r.classList.add("expanded"),c.classList.add("expanded")}),j.addEventListener("click",()=>{u.style.display="flex",p.style.display="flex",h.style.display="none",h.classList.remove("mostrar"),r.classList.remove("expanded"),c.classList.remove("expanded")});const U=r.querySelectorAll(".button2");let T=await V(t);U.forEach(y=>{const b=e._id;console.log(b),T.includes(b)&&(y.textContent="¡Ya estás apuntado!",y.disabled=!0),y.addEventListener("click",async()=>{if(!localStorage.getItem("token")){alert("No estás autorizado. Por favor, inicia sesión para continuar.");return}try{const f=await E(`/${s}/apuntarse/`,{method:"POST",body:JSON.stringify({id:b})});f&&f.message==="Reservado con éxito"?(y.textContent="¡Ya estás apuntado!",y.disabled=!0,console.log("Estado antes de añadir:",{itemId:b,reservedItems:T}),T.includes(b)||(T.push(b),console.log("IDs reservados después:",T))):alert(f.error||`Error al intentar apuntarse al ${t}`)}catch(f){console.error("Error al intentar reservar:",f.message),alert("Error de conexión. Por favor, intenta de nuevo más tarde.")}})}),a&&a.append(r)}},V=async n=>{try{const t=n==="taller"?"talleresReservados":"eventosReservados",o=((await E("/users/perfil",{method:"GET"}))[t]||[]).map(e=>e._id);return console.log(`IDs reservados (${t}):`,o),o}catch(t){return console.error("Error al obtener los elementos reservados:",t),[]}},H=()=>{const t=new URLSearchParams(window.location.hash.split("?")[1]).get("id");console.log(t),t&&setTimeout(()=>{const a=document.querySelector(`.button1a[data-id="${t}"]`);console.log(a),a?(a.click(),setTimeout(()=>{const o=document.querySelector(".div-taller.expanded");o&&o.scrollIntoView({behavior:"smooth",block:"center"})},100)):console.log("No se encontró el botón con el ID",t)},100)},R=async()=>{const n=document.querySelector("main");n.innerHTML="";const t=document.createElement("section");t.className="section-talleres";const a=document.createElement("div");a.className="div-fondo";const o=document.createElement("img");o.src="./assets/waveamarilla.svg",o.className="curva",a.append(o);const e=document.createElement("div");e.className="div-contenedor-talleres";const s=document.createElement("h2");s.textContent="Eventos";const r=document.createElement("div");r.className="organizar-talleres",localStorage.getItem("token");const i=await E("/eventos");console.log("ya funciona eventos",i),D(i,"evento",r).then(()=>{H()}),e.append(a,s,r),t.append(e),n.append(t)},W=async()=>{const n=document.querySelector("main");n.innerHTML="";const t=document.createElement("section");t.className="section-sobre-nosotros",t.innerHTML=`  <div id="div-fondo">
      <img src="./assets/curva2.svg" />
    </div>
    <div id="div-contenedor-nosotros">
      <h2>Sobre Nosotros</h2>
      <div id="contenedor-general-info">
        <div id="contenedor-info1">
          <div id="div-texto">
            <h3>Compromiso con el aprendizaje</h3>
            <p>
             En Skillshare, creemos que todos tienen algo valioso que enseñar y mucho que aprender. Queremos romper las barreras de acceso al conocimiento, permitiendo que cualquier persona pueda explorar nuevas áreas de interés o profundizar en su especialidad, compartiendo conocimientos en una comunidad que valora el crecimiento personal y profesional.
            </p>
          </div>
          <div id="div-icono">
            <img id="icono" src="./assets/iconollave.svg" alt="icono llave" />
          </div>
        </div>
             <div id="contenedor-info1">
              
          <div id="div-texto">
            <h3>Nuestra Comunidad</h3>
            <p>
            Nuestra comunidad está formada por personas curiosas y apasionadas que buscan aprender de los demás y compartir su experiencia con generosidad. Aquí, los instructores no son solo maestros, sino también compañeros en el viaje de aprendizaje. Creemos en la colaboración como la clave para el desarrollo, y cada miembro aporta algo único y valioso.
            </p>
          </div>
         <div id="div-icono">
            <img id="icono" src="./assets/iconocompartir.svg" alt="icono llave" />
          </div>
        </div>
             <div id="contenedor-info1">
          <div id="div-texto">
            <h3>Impacto y Futuro</h3>
            <p>
             Con cada taller y cada participante, seguimos ampliando el acceso al aprendizaje en todos los rincones del mundo. Creemos que el futuro de la educación es colaborativo, y en Skillshare estamos comprometidos a liderar este cambio, impulsando el aprendizaje continuo y compartido. ¿Te unes a esta aventura?.
            </p>
          </div>
          <div id="div-icono">
            <img id="icono" src="./assets/iconofuturo.svg" alt="icono llave" />
          </div>
        </div>
                
      </div>
    </div>`,n.append(t)},$=async()=>{const n=document.querySelector("main");n.innerHTML="";const t=document.createElement("section");t.className="section-talleres";const a=document.createElement("div");a.className="div-fondo";const o=document.createElement("img");o.src="./assets/amarillo.svg",o.className="curva";const e=document.createElement("div");e.className="div-repeat",a.append(o,e);const s=document.createElement("div");s.className="div-contenedor-talleres";const r=document.createElement("h2");r.textContent="Talleres";const i=document.createElement("div");i.className="organizar-talleres";const c=await E("/talleres");console.log("ya funciona",c),c.forEach(d=>{const l=document.createElement("div");l.className="taller-item",l.id=`taller-${d._id}`}),D(c,"taller",i).then(()=>{H()}),s.append(a,r,i),t.append(s),n.append(t)},X=async()=>{const n=document.querySelector("main");n.innerHTML="";const t=document.createElement("section");t.id="mi-espacio-section",t.innerHTML=`
    <div id="div-fondo">
      <img src="./assets/amarillouser.svg">
    </div>
    <div id="div-contenedor-user">
      <div id="div-info1">
        <h1 id="nombre-usuario"></h1>
        <div class="profile-container">
          <input type="file" id="profile-upload" accept="image/*" style="display: none;" />
          <label for="profile-upload" class="profile-label">
            <img src="default-profile.png" alt="" class="profile-image" id="profile-image" />
          </label>
        </div>
        <p id="email"></p>
        <div id="buttons-container">
   
      <button id="cerrar-sesion">Cerrar Sesión</button>
    </div>
      </div>
      <div id="perfil-info">
        <div id="div-talleres">
          <div id="div-t-reservados">
          
              <img id="icono" src="./assets/treservados.png"  />
            <h3 id="toggle-reservados">
              <i class="fas fa-calendar-check"></i> Talleres Reservados 
            </h3>
            <ul id="talleres-reservados"></ul>
          </div>
          <div id="div-t-impartidos">
             <img id="icono" src="./assets/timpartidos.png"  />
            <h3 id="toggle-impartidos">
              <i class="fas fa-chalkboard-teacher"></i> Talleres Impartidos 
            </h3>
            <ul id="talleres-impartidos"></ul>
          </div>
        </div>
        <div id="div-eventos">
         <img id="icono" src="./assets/ereservados.png"  />
          <h3 id="toggle-eventos">
            <i class="fas fa-calendar"></i> Eventos Reservados
          </h3>
          <ul id="eventos-reservados"></ul>
        </div>
      </div>
    </div>
       <div id="contenedor-tus-talleres">
           <div class="div-titulo-talleres">
             <h2>Tus talleres</h2>
         <button id="crear-taller">Crear Taller</button>
           </div>
    
      <div id="div-tus-talleres">
        
      </div>
    </div>
`,console.log("Cargando Mi Espacio..."),Z(),n.append(t);const a=document.getElementById("profile-upload"),o=document.getElementById("profile-image"),e=localStorage.getItem("profileImage");e&&(o.src=e),a&&o?a.addEventListener("change",l=>{const m=l.target.files[0];if(m){const u=new FileReader;u.onload=p=>{const g=p.target.result;o.src=g,localStorage.setItem("profileImage",g)},u.readAsDataURL(m)}else console.log("No se seleccionó ningún archivo o el archivo no es válido.")}):console.error("no se encuentra en el dom");const s=l=>{const m=document.getElementById(l),u=m.style.display==="none"?"block":"none";m.style.display=u};document.getElementById("toggle-reservados").addEventListener("click",()=>{s("talleres-reservados")}),document.getElementById("toggle-impartidos").addEventListener("click",()=>{s("talleres-impartidos")}),document.getElementById("toggle-eventos").addEventListener("click",()=>{s("eventos-reservados")}),document.getElementById("cerrar-sesion").addEventListener("click",ee),document.getElementById("crear-taller").addEventListener("click",()=>{const l=Q();t.appendChild(l)});const c=document.getElementById("div-tus-talleres");async function d(){try{const l=await E("/talleres/user-talleres",{method:"GET"});D(l,"taller",c,!0)}catch(l){console.error("Error al cargar los talleres:",l)}}console.log(c),d()},Z=async()=>{if(!localStorage.getItem("token")){alert("No estás autenticado");return}try{const t=await E("/users/perfil");document.getElementById("nombre-usuario").textContent=t.name,document.getElementById("email").textContent=t.email;const a=(o,e,s,r)=>{const i=document.getElementById(o);e.forEach(c=>{const d=document.createElement("li");d.dataset.id=c._id;const l=document.createElement("div");l.className="title-div",l.textContent=`👉 ${c.titulo}`;const m=document.createElement("button");m.textContent="Desapuntarse",m.classList.add("unreserve-button"),m.addEventListener("click",async u=>{u.stopPropagation(),await te(c._id,r,i,d)}),l.appendChild(m),d.appendChild(l),d.addEventListener("click",()=>{const u=s.name.toLowerCase(),p=c._id;N({page:u,id:p})}),i.appendChild(d)})};a("talleres-reservados",t.talleresReservados,$,"taller"),a("talleres-impartidos",t.talleresImpartidos,$,"taller"),a("eventos-reservados",t.eventosReservados,R,"evento")}catch(t){console.error("Error al obtener el perfil:",t)}};function ee(){localStorage.removeItem("token"),document.cookie="token=; Max-Age=0; path=/;",localStorage.removeItem("user"),window.location.hash="#prehome",location.reload()}const te=async(n,t,a,o)=>{if(!localStorage.getItem("token")){alert("No estás autenticado");return}try{const s=t==="taller"?"talleres":`${t}s`,r=await E(`/${s}/desapuntarse/`,{method:"POST",body:JSON.stringify({id:n})});if(r&&r.message==="Desapuntado con éxito")alert(`Te has desapuntado del ${t} exitosamente`),a.removeChild(o);else{const i=await r.json();alert(`Error: ${i.error||`No se pudo desapuntar del ${t}`}`)}}catch(s){console.error(`Error al desapuntarse del ${t}:`,s),alert(`Ocurrió un error al intentar desapuntarse del ${t}`)}},oe=n=>{const t=document.createElement("div");return t.className="div-design",n.forEach((a,o)=>{const e=document.createElement("img");e.className=`img${o+1}`,e.src=a,t.appendChild(e)}),t},F=()=>{const n=document.querySelector("main");n.innerHTML="";const t=document.querySelector("header");t&&(t.style.display="none");const a=document.createElement("div");a.className="div-fondo";const o=document.createElement("div");o.className="page-for-login";const e=document.createElement("div");e.className="div-h1";const s=document.createElement("h1");s.className="h1-nombre",s.textContent="skillshare",e.append(s);const i=oe(["./assets/comida.png","./assets/diseño.png","./assets/pc.png"]);i.className="div-design";const c=document.createElement("div");c.className="div-login",c.appendChild(e),o.append(c,i),a.append(o),ne(c);const d=document.createElement("div");d.className="register-div";const l=document.createElement("p");l.textContent="¿Aún no tienes cuenta?";const m=document.createElement("button");m.className="button-register",m.textContent="Únete",d.append(l,m),n.appendChild(a),c.append(d),d.style.display="flex";const u=document.createElement("div");u.className="register-form-div",z(u),u.style.display="none",n.appendChild(u),m.addEventListener("click",()=>{N("registro")})},ne=n=>{const t=A("¡Bienvenide de nuevo!",n,{},"login");t.className="form";const a=t.querySelector('input[placeholder="email"]'),o=t.querySelector('input[placeholder="contraseña"]');t.addEventListener("submit",async e=>{e.preventDefault();const s=a.value,r=o.value,i=t.querySelector(".error-msg");if(i&&i.remove(),!s||!r){const c=document.createElement("p");c.className="error-msg",c.textContent="El email y la contraseña son obligatorios",t.append(c);return}try{const c=await E("/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,password:r})});if(console.log("Respuesta de la API:",c),c&&c.token&&c.user)localStorage.setItem("token",c.token),localStorage.setItem("user",JSON.stringify(c.user)),console.log("Inicio de sesión exitoso:",c),N("home");else{const d=document.createElement("p");d.textContent="Error al iniciar sesión, datos incorrectos.",d.className="error-msg",t.append(d)}}catch(c){console.error("Error al iniciar sesión:",c)}})};window.addEventListener("popstate",()=>{const t=window.location.hash.slice(1)||"home";N(t)});const N=async n=>{const t=document.querySelector("header"),a=document.querySelector("main");a.innerHTML="";let o=null,e=null;if(o==="login"||o==="registro"?t.style.display="none":t.style.display="block",typeof n=="string")o=n;else if(typeof n=="object"&&n!==null)o=n.page||null,e=n.id||null;else{console.error('El argumento "pageOrObject" no es válido:',n);return}if(!o){console.error("No se proporcionó una página válida para navegar.");return}const s=`#${o.toLowerCase().replace(/\s+/g,"-")}`;e?window.history.pushState({},o,`${s}?id=${e}`):window.location.hash===`#${o.toLowerCase().replace(/\s+/g,"-")}`?window.history.replaceState({},o,`${s}`):window.history.pushState({},o,`${s}`),localStorage.setItem("currentPage",o);try{switch(console.log(`Navegando a la página: ${o}${e?` con ID: ${e}`:""}`),o){case"home":await P();break;case"talleres":await $(e);break;case"eventos":await R(e);break;case"mi-espacio":await X();break;case"sobre-nosotros":await W();break;case"prehome":await _();break;case"login":await F();break;case"registro":await z(a);break;default:await P()}}catch(r){console.error("Error al navegar:",r)}},P=async()=>{const n=document.querySelector("main"),t=document.getElementById("app2");t.innerHTML="",n.innerHTML="";const a=document.createElement("div");a.className="div-fondo-home";const o=document.createElement("img");o.className="curva-fondo",o.src="./assets/amarillo.svg",a.append(o);const e=document.createElement("div");e.className="div-home",a.append(e);const s=document.createElement("div");s.className="div-texto";const r=document.createElement("h1");r.className="h1-skills",r.textContent="skillshare";const i=document.createElement("h2");i.className="h2-info",i.textContent="La web donde podrás aprender y enseñar de todo";let{divButtons:c,button1:d,button2:l}=B("< Sobre Nosotros","Ver más talleres >");l.addEventListener("click",()=>{N("talleres")}),d.addEventListener("click",()=>{N("sobre-nosotros")}),s.append(r,i,c),e.appendChild(s);const m=document.createElement("div");m.className="div-talleres";const u=await E("/talleres");console.log(u),ae(u,m),m.querySelectorAll(".div-taller").forEach(g=>{g.addEventListener("click",()=>{const v=g.getAttribute("data-id");v&&(window.history.pushState({},"Talleres",`#talleres?id=${v}`),N({page:"talleres",id:v}))})}),e.append(m),n.appendChild(a)},ae=(n,t)=>{const a=n.slice(0,4);for(const o of a){const e=document.createElement("div");e.className="div-taller",e.setAttribute("data-id",o._id);const s=document.createElement("div");s.className="div-img";const r=document.createElement("img");r.className="img-taller";const i=document.createElement("h3");i.className="titulo-taller",r.src=o.img,i.textContent=o.titulo,s.append(r),e.append(s),e.append(i),t.append(e)}},z=n=>{n.innerHTML="";const t=document.querySelector("header");t&&(t.style.display="none");const a=document.createElement("div");a.className="register-only";const o=document.createElement("div");o.className="div-fondo";const e=document.createElement("div");e.className="page-for-login";const s=document.createElement("div");s.className="div-login";const r=document.createElement("div");r.className="div-h1";const i=document.createElement("h1");i.className="h1-nombre",i.textContent="skillshare",r.append(i),s.append(r);const c=document.createElement("div");c.className="div-design";const d=document.createElement("img");d.className="img-register",d.src="./assets/redes.png",c.append(d),e.append(s,c),o.append(e),a.append(o);const l=A("Registrarse",n,{nombre:!0},"registro");l.className="form-register";const m=document.createElement("p");m.className="error-msg",m.style.display="none",l.appendChild(m);const u=l.querySelector('input[placeholder="nombre"]'),p=l.querySelector('input[placeholder="email"]'),g=l.querySelector('input[placeholder="contraseña"]'),v=h=>{m.textContent=h,m.style.display="flex"};l.addEventListener("submit",async h=>{h.preventDefault();const w=u.value.trim(),C=p.value.trim(),I=g.value.trim();if(!w||!C||!I){v("El nombre, el email y la contraseña son obligatorios.");return}if(I.length<10){v("La contraseña debe tener al menos 10 caracteres.");return}m.style.display="none";try{const x=await apiFetch("/users/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:w,email:C,password:I})});if(!x.ok){(await x.json()).message.includes("Este usuario ya está registrado")?v("El usuario ya está registrado."):v("Error en la solicitud de registro.");return}const S=await x.json();console.log("Token:",S.token),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.setItem("user",JSON.stringify(S)),localStorage.setItem("token",S.token),console.log("Registro exitoso:",S),a.style.display="none",N("home")}catch(x){console.error("Error al registrar el usuario:",x),v("Error al registrar el usuario.")}}),s.append(l),n.appendChild(a)},_=async()=>{const n=document.querySelector("#app");n.id="app";const t=document.querySelector("#app2");t.id="app2";const a=document.querySelector("header");a&&(a.style.display="none");const o=document.createElement("div");o.className="mini-header",o.innerHTML='<p> <a href="#login" id="loginlink">Inicia sesión</a> si ya estás registrado</p>',n.append(o);const e=document.createElement("div");e.className="div-prehome";const s=document.createElement("div");s.className="div-info";const r=document.createElement("div");r.className="div-texto";const i=document.createElement("h2");i.className="h2-texto",i.textContent="¿Quieres que te ayudemos a encontrar la pieza que falta?";const c=document.createElement("p");c.textContent="Haz click en el puzle para saber más";const d=document.createElement("button");d.className="button-puzzle";const l=document.createElement("img");l.className="img-puzzle",l.src="./assets/puzle7.png",d.append(l),d.addEventListener("click",se),r.append(i,c),s.append(r,d),e.append(s),t.append(e)},se=()=>{const n=document.getElementById("app"),t=document.getElementById("app2");t.innerHTML="";const a=document.createElement("div");a.className="div-prehome2";const o=document.createElement("div");o.className="div-info2";const e=document.createElement("h2");e.className="texto2",e.textContent="Bienvenido a Skillshare, la plataforma donde aprender y enseñar no tiene límites. Encuentra inspiración en cada clase.";const s=document.createElement("img");s.src="./assets/gif.gif",s.className="gif";const r=document.createElement("div");r.className="div-registrate";const i=document.createElement("a");i.textContent="Regístrate ",i.href="#registro",i.id="a-registrate";const c=document.createElement("h2");c.textContent="y empieza a explorar un mundo de posibilidades.",c.className="h2-registrate",r.append(i,c);const d=document.createElement("div"),l=document.getElementsByClassName("mini-header");i.addEventListener("click",m=>{m.preventDefault(),a.style.display="none",l[0]&&(l[0].style.display="none"),z(d),n.appendChild(d)}),o.append(e,s,r),a.append(o),t.append(a)},re=n=>{const t=document.querySelector("header"),a=document.createElement("nav"),o=document.createElement("button");o.classList.add("burger-button"),o.innerHTML="&#9776;",t.append(o);const e=[{texto:"Home",href:"#home",funcion:()=>n("home")},{texto:"Talleres",href:"#talleres",funcion:()=>n("talleres")},{texto:"Eventos",href:"#eventos",funcion:()=>n("eventos")},{texto:"Mi Espacio",href:"#mi-espacio",funcion:()=>n("mi-espacio")}];for(const s of e){const r=document.createElement("a");r.textContent=s.texto,r.href=s.href,r.addEventListener("click",i=>{i.preventDefault(),console.log("Ruta clickeada:",s.texto),s.funcion()}),a.append(r)}t.append(a),o.addEventListener("click",()=>{a.classList.toggle("hidden")})},ie=()=>{const n=document.createElement("footer");n.innerHTML=`
   
      <div class="footer-copyright">
        <p>&copy; ${new Date().getFullYear()} Página creada por Nuria Morcillo Bonillo</p>
      </div>
    </div>
  `,document.body.appendChild(n)},ce=()=>{const n=document.querySelector("#app"),t=document.createElement("header"),a=document.createElement("main");n.appendChild(t),n.appendChild(a),re(N),_()};ce();ie();document.addEventListener("click",n=>{if(n.target.id==="loginlink"){const a=document.querySelector(".div-prehome"),o=document.querySelector(".div-prehome2"),e=document.querySelector(".mini-header");a&&(a.style.display="none"),o&&(o.style.display="none"),e&&(e.style.display="none"),F()}});
